<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.sakila.mapper.StaffMapper">
	<select id="selectStaffLogin" parameterType="com.gd.sakila.vo.Staff" resultType="com.gd.sakila.vo.Staff">
		SELECT staff_id staffId, email email, username username FROM staff WHERE email=#{email} AND password=PASSWORD(#{password})
	</select>
	
	<select id="selectStaffAll" parameterType="com.gd.sakila.vo.PageParam" resultType="com.gd.sakila.vo.StaffList">
		SELECT 
			s.staff_id ID, 
			CONCAT(s.first_name, _utf8mb4' ', s.last_name) NAME, 
			a.address address, 
			a.postal_code zipCode, 
			a.phone phone,
			city.city city, 
			country.country country, 
			s.store_id SID
		FROM staff s 
				JOIN address a ON s.address_id = a.address_id 
				JOIN city ON a.city_id = city.city_id
				JOIN country ON city.country_id = country.country_id 
		<where>
			<if test="searchWord != null"> username LIKE CONCAT('%',#{searchWord},'%') </if>
		</where>
	</select>
	
	<select id="selectStaffOne" parameterType="int" resultType="com.gd.sakila.vo.StaffList">
		SELECT 
			s.staff_id ID, 
			CONCAT(s.first_name, _utf8mb4' ', s.last_name) NAME, 
			a.address address, 
			a.postal_code zipCode, 
			a.phone phone,
			city.city city, 
			country.country country, 
			s.store_id SID
		FROM staff s 
				JOIN address a ON s.address_id = a.address_id 
				JOIN city ON a.city_id = city.city_id
				JOIN country ON city.country_id = country.country_id 
		WHERE s.staff_id = #{ID}
	</select>
</mapper>